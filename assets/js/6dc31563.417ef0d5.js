"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9532],{7793:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var r=i(4848),t=i(8453);const l={slug:"dockerizeprotocollogger",title:"Dockerize MQTT protocol Logger.",authors:"selcuk",tags:["linux"]},s=void 0,o={permalink:"/blog/dockerizeprotocollogger",source:"@site/blog/2024-06-11-dockerize-protocolLogger/index.md",title:"Dockerize MQTT protocol Logger.",description:"Docusaurus Plushie",date:"2024-06-11T00:00:00.000Z",tags:[{inline:!1,label:"linux",permalink:"/blog/tags/linux",description:"linux"}],readingTime:2.13,hasTruncateMarker:!0,authors:[{name:"Selcuk Gok",title:"Maintainer",url:"https://github.com/selcukgk29",imageURL:"https://avatars.githubusercontent.com/u/36342161?s=400&u=24c9a3b5bdc0717dd3a73952862c8078861a0b6d&v=4",key:"selcuk"}],frontMatter:{slug:"dockerizeprotocollogger",title:"Dockerize MQTT protocol Logger.",authors:"selcuk",tags:["linux"]},unlisted:!1,prevItem:{title:"Digital Cluster with OBD-II",permalink:"/blog/digitalCluster"},nextItem:{title:"Modbus TCP web client.",permalink:"/blog/modbustcpwebclient"}},a={authorsImageUrls:[void 0]},c=[{value:"<code>/user/login</code>",id:"userlogin",level:3},{value:"<code>/getAll</code>",id:"getall",level:3},{value:"<code>/getAll/testtopic0</code>",id:"getalltesttopic0",level:3},{value:"<code>/getByDate/testtopic0/from=&lt;starttimestamp&gt;/to=&lt;endtimestamp&gt;</code>",id:"getbydatetesttopic0fromstarttimestamptoendtimestamp",level:3}];function d(e){const n={code:"code",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{alt:"Docusaurus Plushie",src:i(8154).A+"",width:"1060",height:"773"}),"\r\nBu Dockerize edilmi\u015f MQTT protokol logger uygulamas\u0131, 4 adet Docker container'\u0131ndan olu\u015fmaktad\u0131r: Python logger servisi, Node.js REST API servisi, Mosquitto MQTT brokeri ve MongoDB sunucusu. Uygulaman\u0131n \xe7al\u0131\u015fma mant\u0131\u011f\u0131 \u015fu \u015fekildedir:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Python Logger Servisi:"})}),"\n",(0,r.jsx)(n.p,{children:"Ba\u015flang\u0131\xe7ta \xe7al\u0131\u015farak MQTT broker\u0131na ve MongoDB sunucusuna ba\u011flan\u0131r.\r\nMQTT broker\u0131 \xfczerinde olu\u015fmu\u015f t\xfcm topic'leri dinler.\r\nHerhangi bir MQTT topic'ine yeni veri ula\u015ft\u0131\u011f\u0131nda, bu topic ad\u0131nda bir MongoDB koleksiyonu olu\u015fturur.\r\nVerileri ilgili koleksiyon i\xe7ine yazarak MongoDB'ye kaydeder."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Mosquitto MQTT Broker:"})}),"\n",(0,r.jsx)(n.p,{children:"MQTT istemcileri ve Python logger servisi aras\u0131nda mesajla\u015fma sa\u011flar.\r\nBelirli bir MQTT topic'ine abone olan istemcilere mesajlar\u0131 iletebilir."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Docusaurus Plushie",src:i(6179).A+"",width:"753",height:"688"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"MongoDB Sunucusu:"})}),"\n",(0,r.jsx)(n.p,{children:"Veritaban\u0131 olarak kullan\u0131l\u0131r.\r\nPython logger servisinin ald\u0131\u011f\u0131 MQTT verilerini saklamak i\xe7in kullan\u0131l\u0131r.\r\nHer MQTT topic'i i\xe7in ayr\u0131 bir MongoDB koleksiyonu olu\u015fturur ve bu koleksiyonlara veri kaydeder."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Docusaurus Plushie",src:i(6643).A+"",width:"752",height:"688"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Node.js REST API Servisi:"})}),"\n",(0,r.jsx)(n.p,{children:"MongoDB sunucusundaki verilere eri\u015fim sa\u011flamak ve istemcilere HTTP API \xfczerinden veri sunmak i\xe7in kullan\u0131l\u0131r.\r\n\u0130stemcilerin MongoDB'deki verilere eri\u015fmesine, veri eklemesine veya g\xfcncellemesine izin veren HTTP endpoint'leri sunar."}),"\n",(0,r.jsx)(n.p,{children:"Node.js REST API servisi, istemcilerin MongoDB sunucusundaki verilere HTTP API \xfczerinden eri\u015fmesine olanak tan\u0131r. REST API servisinize gelen isteklerin kimlik do\u011frulamas\u0131 i\xe7in Bearer token gereklidir.Login requestinin response unda bu token bulunur.A\u015fa\u011f\u0131da belirtilen HTTP endpoint'leri sa\u011flar:"}),"\n",(0,r.jsx)(n.h3,{id:"userlogin",children:(0,r.jsx)(n.code,{children:"/user/login"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"A\xe7\u0131klama"}),": Kullan\u0131c\u0131 giri\u015fi i\xe7in POST iste\u011fi al\u0131r."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\xd6rnek \u0130stek"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'POST http://localhost:5000/user/login\r\n\r\n{\r\n  "email": "asd@asd.com",\r\n  "password": "123456"\r\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getall",children:(0,r.jsx)(n.code,{children:"/getAll"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"A\xe7\u0131klama"}),": Belirtilen koleksiyondaki t\xfcm belgeleri almak i\xe7in GET iste\u011fi al\u0131r."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\xd6rnek \u0130stek"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'GET http://localhost:5000/getAll\r\n\r\n{\r\n  "request": {\r\n    "type": "GET",\r\n    "method": "getAll",\r\n    "url": "http://localhost:3000/getAll",\r\n    "body": {\r\n      "message": "Please choose collection",\r\n      "collections": [\r\n        "users",\r\n        "testtopic0"\r\n      ]\r\n    }\r\n  }\r\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getalltesttopic0",children:(0,r.jsx)(n.code,{children:"/getAll/testtopic0"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"A\xe7\u0131klama"}),": ",(0,r.jsx)(n.code,{children:"testtopic0"})," koleksiyonundaki belgeleri almak i\xe7in GET iste\u011fi al\u0131r."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\xd6rnek \u0130stek"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'GET http://localhost:5000/getAll/testtopic0\r\n\r\n{\r\n  "request": {\r\n    "type": "GET",\r\n    "url": "http://localhost:3000/getAll/testtopic0",\r\n    "body": {\r\n      "message": "Response is coming from testtopic0 collection",\r\n      "values": [\r\n        {\r\n          "_id": "6668b9d26379a9f6d0d75288",\r\n          "topic": "testtopic0",\r\n          "payload": [\r\n            {\r\n              "testkey": "560,456"\r\n            }\r\n          ],\r\n          "time": 1718139346167\r\n        },\r\n        {\r\n          "_id": "6668ba076379a9f6d0d7528a",\r\n          "topic": "testtopic0",\r\n          "payload": [\r\n            {\r\n              "testkey": "460,456"\r\n            }\r\n          ],\r\n          "time": 1718139399258\r\n        },\r\n        {\r\n          "_id": "6668ba0e6379a9f6d0d7528c",\r\n          "topic": "testtopic0",\r\n          "payload": [\r\n            {\r\n              "testkey": "460,456"\r\n            }\r\n          ],\r\n          "time": 1718139406714\r\n        },\r\n        {\r\n          "_id": "6668ba126379a9f6d0d7528e",\r\n          "topic": "testtopic0",\r\n          "payload": [\r\n            {\r\n              "testkey": "480,456"\r\n            }\r\n          ],\r\n          "time": 1718139410901\r\n        },\r\n        {\r\n          "_id": "6668ba176379a9f6d0d75290",\r\n          "topic": "testtopic0",\r\n          "payload": [\r\n            {\r\n              "testkey": "489,456"\r\n            }\r\n          ],\r\n          "time": 1718139415455\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getbydatetesttopic0fromstarttimestamptoendtimestamp",children:(0,r.jsx)(n.code,{children:"/getByDate/testtopic0/from=<starttimestamp>/to=<endtimestamp>"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"A\xe7\u0131klama"}),": Belirtilen zaman aral\u0131\u011f\u0131 i\xe7indeki ",(0,r.jsx)(n.code,{children:"testtopic0"})," koleksiyonundaki belgeleri almak i\xe7in GET iste\u011fi al\u0131r."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\xd6rnek \u0130stek"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"GET http://localhost:5000/getByDate/testtopic0/from=1718139346167/to=1718139415455\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Bu endpoint'ler, istemcilere belirli koleksiyonlardaki verilere eri\u015fme ve i\u015flemler yapma imkan\u0131 sa\u011flar. MongoDB veritaban\u0131n\u0131zda ilgili koleksiyonlar\u0131n ve istemci isteklerinin do\u011fru \u015fekilde y\xf6nlendirilmesini sa\u011flamak i\xe7in bu \xf6rnekler \xfczerinden ilerleyebilirsiniz."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8154:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/clicompose-a7f55a6407176af7366f85b697bd1738.PNG"},6643:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/mongosh-946ffc2f7be87a9a389e7385170cef7f.PNG"},6179:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/mqttbox-390ed39b355c4689c9ab6d970cf42918.PNG"},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var r=i(6540);const t={},l=r.createContext(t);function s(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);